# üîç –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **–í–∞—Ä–∏–∞–Ω—Ç 2 (–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥)** –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:
- **–û–±—â–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã** (`schedule_views`) - –±–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã** (`detailed_views`) - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤

---

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ù–µ –∏–∑–º–µ—Ä—è–ª–∞—Å—å —Ä–µ–∞–ª—å–Ω–∞—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í—Å–µ –ø–∞—Ä—ã —Å—á–∏—Ç–∞–ª–∏—Å—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```
–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è ‚Üí –ù–ï —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä
        ‚Üì
–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ ‚Üí +1 –∫ detailed_views
        ‚Üì
50+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Üí –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç üîç"
```

---

## üîß Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (`models.py`)

**UserStats:**
```python
class UserStats(BaseModel):
    schedule_views: int = 0      # –û–±—â–∏–π —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
    detailed_views: int = 0      # üÜï –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
```

**UserStatsResponse:**
```python
class UserStatsResponse(BaseModel):
    schedule_views: int
    detailed_views: int          # üÜï –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ API –æ—Ç–≤–µ—Ç
```

### 2. –ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ (`achievements.py`)

```python
{
    "id": "attentive_student",
    "name": "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç",
    "description": "50+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)",
    "emoji": "üîç",
    "points": 30,
    "type": "attentive_student",
    "requirement": 50
}
```

### 3. –¢—Ä–µ–∫–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏–π (`achievements.py`)

**–ù–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:**
```python
elif action_type == "detailed_view":
    # –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä - —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
    update_data["$inc"] = {"detailed_views": 1}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
```python
elif achievement_id == "attentive_student" and stats.detailed_views >= 50:
    earned = True
```

### 4. API Endpoint (`server.py`)

**GET /api/user-stats/{telegram_id}:**
```python
return UserStatsResponse(
    detailed_views=stats.detailed_views,  # üÜï –¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
    # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
)
```

**POST /api/track-action:**
```json
{
  "telegram_id": 123456789,
  "action_type": "detailed_view",
  "metadata": {
    "schedule_index": 0,
    "timestamp": "2024-11-16T17:30:00Z"
  }
}
```

---

## üé® Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–±—Ä–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç (`App.js`)

**–î–æ:**
```javascript
useEffect(() => {
  if (schedule.length > 0 && user) {
    trackScheduleView();  // ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞–ª –ø—Ä–æ—Å–º–æ—Ç—Ä
  }
}, [schedule]);
```

**–ü–æ—Å–ª–µ:**
```javascript
// ‚ùå –£–ë–†–ê–ù–û: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
// –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ (detailed_view)
```

### 2. –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ (`LiveScheduleSection.jsx`)

**–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç:**
```javascript
import { achievementsAPI } from '../services/api';
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è toggleExpand:**
```javascript
const toggleExpand = async (index) => {
  if (hapticFeedback) hapticFeedback('selection');
  
  const isExpanding = expandedIndex !== index;
  setExpandedIndex(expandedIndex === index ? null : index);
  
  // üîç –¢–†–ï–ö–ò–ù–ì –î–ï–¢–ê–õ–¨–ù–û–ì–û –ü–†–û–°–ú–û–¢–†–ê
  // –°—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è (–Ω–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è)
  if (isExpanding && telegramId) {
    try {
      const result = await achievementsAPI.trackAction(telegramId, 'detailed_view', {
        schedule_index: index,
        timestamp: new Date().toISOString()
      });
      
      // –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –ª–æ–≥–∏—Ä—É–µ–º
      if (result.new_achievements && result.new_achievements.length > 0) {
        console.log('üéâ –ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∑–∞ –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä!', result.new_achievements[0]);
      }
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Ç—Ä–µ–∫–∏–Ω–≥–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:', error);
    }
  }
};
```

### 3. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`AnalyticsModal.jsx`)

**–î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø userStats:**
```javascript
export const AnalyticsModal = ({ isOpen, onClose, schedule, userStats, hapticFeedback }) => {
```

**–ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
```jsx
{/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è */}
{userStats && (
  <div className="bg-[#1F1F1F] rounded-2xl p-4 border border-gray-700">
    <h3 className="text-white font-semibold mb-3">
      <TrendingUp className="w-4 h-4 text-[#A3F7BF]" />
      –í–∞—à–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    </h3>
    <div className="grid grid-cols-2 gap-3">
      {/* –û–±—â–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã */}
      <div className="bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-xl p-3">
        <div className="text-xs text-gray-400">–ü—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</div>
        <div className="text-xl font-bold text-white">{userStats.schedule_views || 0}</div>
        <div className="text-xs text-blue-400">–æ–±—â–∏—Ö</div>
      </div>
      
      {/* –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã */}
      <div className="bg-gradient-to-br from-purple-500/10 to-pink-500/10 rounded-xl p-3">
        <div className="text-xs text-gray-400">–î–µ—Ç–∞–ª—å–Ω—ã—Ö üîç</div>
        <div className="text-xl font-bold text-white">{userStats.detailed_views || 0}</div>
        <div className="text-xs text-purple-400">—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ</div>
      </div>
    </div>
    <div className="mt-3 text-xs text-gray-400">
      üí° –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã - —ç—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤. 
      –ù–∞–±–µ—Ä–∏—Ç–µ 50+ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç üîç"
    </div>
  </div>
)}
```

---

## üìä –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
         –û—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
                    ‚îÇ
                    ‚îÇ (–ù–ï —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—Å–º–æ—Ç—Ä)
                    ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  –í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–º–µ—Ç–æ–≤  ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚ñº           ‚ñº           ‚ñº
   –°–º–æ—Ç—Ä–∏—Ç   –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç  –°–∫—Ä–æ–ª–ª–∏—Ç
   —Å–ø–∏—Å–æ–∫      –∫–∞—Ä—Ç–æ—á–∫—É      –¥–∞–ª—å—à–µ
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚îÇ           ‚ñº           ‚îÇ
        ‚îÇ    ‚úÖ +1 detailed_view‚îÇ
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚îÇ           ‚ñº           ‚îÇ
        ‚îÇ   API: track-action   ‚îÇ
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚îÇ           ‚ñº           ‚îÇ
        ‚îÇ   MongoDB: detailed_views++‚îÇ
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚îÇ           ‚ñº           ‚îÇ
        ‚îÇ   –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ‚îÇ
        ‚îÇ           ‚îÇ           ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
         –ï—Å–ª–∏ detailed_views >= 50
                    ‚îÇ
                    ‚ñº
         üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç"
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. –ò–∑–º–µ—Ä—è–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω **–∞–∫—Ç–∏–≤–Ω–æ** —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
- –°–ª—É—á–∞–π–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å –∫ –¥–µ—Ç–∞–ª—è–º –ø—Ä–µ–¥–º–µ—Ç–∞

### 2. –î–≤–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
```
schedule_views:   –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∑–∞–≥—Ä—É–∂–∞–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–æ–±—â–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)
detailed_views:   –°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ (–≥–ª—É–±–∏–Ω–∞ –∏–∑—É—á–µ–Ω–∏—è)
```

### 3. –ú–æ—Ç–∏–≤–∞—Ü–∏—è –∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é
- –ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç üîç"
- 30 –±–∞–ª–ª–æ–≤ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
- –í–∏–¥–∏–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ

### 4. –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è –±—É–¥—É—â–µ–≥–æ
–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- –í—Ä–µ–º—è –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏
- –ö–∞–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã —á–∞—â–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å—é

---

## üìà –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ê–∫—Ç–∏–≤–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç
```
–î–µ–Ω—å 1: –û—Ç–∫—Ä—ã–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Üí 0 detailed_views
        –†–∞–∑–≤–µ—Ä–Ω—É–ª "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞" ‚Üí 1 detailed_view
        –†–∞–∑–≤–µ—Ä–Ω—É–ª "–§–∏–∑–∏–∫–∞" ‚Üí 2 detailed_views

–î–µ–Ω—å 2: –û—Ç–∫—Ä—ã–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Üí 2 detailed_views (–Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å)
        –†–∞–∑–≤–µ—Ä–Ω—É–ª "–§–∏–∑–∏–∫–∞" —Å–Ω–æ–≤–∞ ‚Üí 3 detailed_views
        
–î–µ–Ω—å 15: –î–æ—Å—Ç–∏–≥ 50 detailed_views ‚Üí üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ!
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–∞—Å—Å–∏–≤–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç
```
–î–µ–Ω—å 1: –û—Ç–∫—Ä—ã–ª —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Üí 0 detailed_views
        –ü—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä–∏—Ç —Å–ø–∏—Å–æ–∫ ‚Üí 0 detailed_views
        –ó–∞–∫—Ä—ã–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí 0 detailed_views

(–ù–µ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### API Endpoints –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**1. –¢—Ä–µ–∫–∏–Ω–≥ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:**
```bash
curl -X POST http://localhost:8001/api/track-action \
  -H "Content-Type: application/json" \
  -d '{
    "telegram_id": 123456789,
    "action_type": "detailed_view",
    "metadata": {
      "schedule_index": 0,
      "timestamp": "2024-11-16T17:30:00Z"
    }
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "new_achievements": [],
  "total_points_earned": 0
}
```

**2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
```bash
curl http://localhost:8001/api/user-stats/123456789
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "telegram_id": 123456789,
  "schedule_views": 0,
  "detailed_views": 1,
  "total_points": 0,
  "achievements_count": 0
}
```

**3. –ü–æ—Å–ª–µ 50 –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:**
```json
{
  "new_achievements": [
    {
      "id": "attentive_student",
      "name": "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç",
      "description": "50+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤",
      "emoji": "üîç",
      "points": 30
    }
  ],
  "total_points_earned": 30
}
```

---

## üîç MongoDB —Å—Ö–µ–º–∞

**–ö–æ–ª–ª–µ–∫—Ü–∏—è: user_stats**
```javascript
{
  "_id": ObjectId("..."),
  "telegram_id": 123456789,
  "schedule_views": 100,        // –°—Ç–∞—Ä–∞—è –º–µ—Ç—Ä–∏–∫–∞ (–æ–±—â–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã)
  "detailed_views": 45,          // üÜï –ù–æ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞ (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
  "total_points": 120,
  "achievements_count": 5,
  "created_at": ISODate("2024-11-01T10:00:00Z"),
  "updated_at": ISODate("2024-11-16T17:30:00Z")
}
```

**–ö–æ–ª–ª–µ–∫—Ü–∏—è: user_achievements**
```javascript
{
  "_id": ObjectId("..."),
  "telegram_id": 123456789,
  "achievement_id": "attentive_student",
  "earned_at": ISODate("2024-11-16T17:45:00Z"),
  "seen": false
}
```

---

## üìö –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

| ID | –ù–∞–∑–≤–∞–Ω–∏–µ | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ë–∞–ª–ª—ã |
|----|----------|------------|-------|
| first_group | –ü–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥–µ—Ü | –í—ã–±–æ—Ä –ø–µ—Ä–≤–æ–π –≥—Ä—É–ø–ø—ã | 10 |
| group_explorer | –®–ø–∏–æ–Ω | 3+ —Ä–∞–∑–Ω—ã—Ö –≥—Ä—É–ø–ø | 15 |
| social_butterfly | –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –±–∞–±–æ—á–∫–∞ | 5+ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö | 20 |
| schedule_gourmet | –†–∞—Å–ø–∏—Å–∞–Ω–∏–π –≥—É—Ä–º–∞–Ω | 50+ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ | 25 |
| **attentive_student** | **–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç** | **50+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** | **30** |
| night_owl | –ù–æ—á–Ω–æ–π —Å–æ–≤—ë–Ω–æ–∫ | –ü–æ—Å–ª–µ 00:00 | 10 |
| early_bird | –£—Ç—Ä–µ–Ω–Ω—è—è –ø—Ç–∞—à–∫–∞ | –î–æ 08:00 | 10 |
| analyst | –ê–Ω–∞–ª–∏—Ç–∏–∫ | –û—Ç–∫—Ä—ã–ª –∞–Ω–∞–ª–∏—Ç–∏–∫—É | 10 |
| chart_lover | –õ—é–±–∏—Ç–µ–ª—å –≥—Ä–∞—Ñ–∏–∫–æ–≤ | 5+ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ | 15 |
| organizer | –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∫–∞–ª–µ–Ω–¥–∞—Ä—å | 10 |
| settings_master | –ú–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫ | –ù–∞—Å—Ç—Ä–æ–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | 10 |
| knowledge_sharer | –î–µ–ª–∏—à—å—Å—è –∑–Ω–∞–Ω–∏—è–º–∏ | –ü–æ–¥–µ–ª–∏–ª—Å—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º | 15 |
| ambassador | –ê–º–±–∞—Å—Å–∞–¥–æ—Ä | 5+ –ø–æ–¥–µ–ª–∏–ª—Å—è | 25 |
| explorer | –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å | –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã –º–µ–Ω—é | 20 |
| first_week | –ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è | 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ | 30 |
| perfectionist | –ü–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç | –í—Å–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | 50 |

**–ò—Ç–æ–≥–æ:** 16 –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–±—ã–ª–æ 15)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Backend:
- ‚úÖ –ú–æ–¥–µ–ª—å UserStats –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (detailed_views –¥–æ–±–∞–≤–ª–µ–Ω–æ)
- ‚úÖ –ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç" –¥–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ –¢—Ä–µ–∫–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏—è "detailed_view" —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ API endpoint /api/user-stats –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç detailed_views
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è attentive_student —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Backend —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω

### Frontend:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —É–±—Ä–∞–Ω
- ‚úÖ –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ AnalyticsModal –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
- ‚úÖ Frontend —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º:**
   - –ö–∞–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã —á–∞—â–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç
   - –¢–æ–ø-5 —Å–∞–º—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω

2. **–í—Ä–µ–º–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏
   - –í –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –¥–Ω—è —á–∞—â–µ —Å–º–æ—Ç—Ä—è—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
   - "–õ—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π" - 100+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
   - "–≠–∫—Å–ø–µ—Ä—Ç" - 200+ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤

4. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–∞—Å—Ç–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –ø–∞—Ä–∞—Ö

---

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2024-11-16  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Backward compatible (—Å—Ç–∞—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—á–Ω—É—Ç —Å 0 detailed_views)
